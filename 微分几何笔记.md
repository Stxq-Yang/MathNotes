# 微分几何笔记  
## 知识回顾  
(本文中，n维实数的通常拓扑记作$(\mathbb{R}^n,\tau_{\mathbb{R}^n})$，其上度量记作$d_{\mathbb{R}^n}$)  
  
点集拓扑中，我们已经知道这样两个概念  
### 第二可数空间  
*一个空间$(X,\tau)$是**第二可数空间**，当且仅当* $\exists \mathcal{B}\text{是}X\text{的基},s.t.\, \operatorname{card}(\mathcal{B})\le \aleph_0$  
  
### T2分离性(Hausdorff)  
*一个空间$(X,\tau)$是**T2空间(Hausdorff空间)**，当且仅当* $\forall x,y \in X,\exists U\in \mathcal{N}(x),V\in \mathcal{N}(y),s.t. \, U\cap V = \varnothing$  
  
另外我们回顾一下$\mathbb{R}^n$上的全微分  
  
### 全微分  
*令$U\in \tau_{\mathbb{R}^n}$, $f:U \to \mathbb{R}^n$在$a\in U$点可微，当且仅当存在线性映射$L:\mathbb{R}^n\to \mathbb{R}^n$  
$s.t.\; \forall V\in \mathcal{N}(0),\exists W\in \mathcal{N}(0),s.t.\; \forall h\in W \setminus \{0\},\frac{d_{\mathbb{R}^n}(f(a+h),f(a)+L(h))}{d_{\mathbb{R}^n}(h,0)}\in V$ 此时$L$被称为$f$在$a$处的导数，记作映射$Df:a\mapsto L$。即$Df:U\to L(\mathbb{R}^n,\mathbb{R}^n)\cong \mathbb{R}^{(n^2)}$*  
  
$C^0(U,\mathbb{R}^n)=\{f:U\to \mathbb{R}^n\mid f\text{连续映射}\}$  
  
$C^1(U,\mathbb{R}^n)=\{f:U\to \mathbb{R}^n\mid \forall x\in U,f\text{在}x\text{处可导},Df\in C^0(U,\mathbb{R}^n)\}$  
  
$C^k(U,\mathbb{R}^n)=\{f\in C^1\mid Df\in C^{k-1}(U,\mathbb{R}^{(n^2)})\}$  
  
$C^{\infty}(U,\mathbb{R}^n)=\bigcap_{n\in \mathbb{N}} C^n $  
  
~~服了，我感觉要补习一下泛函，点集直接跳过来学微几跨度太大了,虽然还能理解~~  
## *What is 流形?*  
  
这是一个非常核心的概念，通俗的讲，流形是局部像欧氏空间的空间，形式的讲：  
  
### 流形  
*一个第二可数的T2空间$(M,\tau)$是$n$**维流形**，当且仅当*  
  
*$\forall p\in M,\exists U\in \mathcal{N}(p),\exists V\in \tau_{\mathbb{R}^n},s.t.\,\varphi:U \to V\text{是同胚映射}$，此时$(U,\varphi)$称为一个**坐标卡***  
  
第二可数意味着这个空间是可能度量的，Hausdorff性质意味着点是可以分离的，这都非常自然。坐标卡的存在，允许了围绕任意一点的附近区域都能展开到欧几里得空间下，精准的描述了局部的欧几里得性质，让每个点周围的区域都能像欧几里得空间一样处理，或者反过来说，我们用欧几里得空间进行同胚粘合出了一个新的空间。  
  
但是对于一个任意构造的空间。所有点分别构建起的坐标卡并不一定足够好，造成重叠区域出现冲突，让我们需要的那两个欧几里得空间上无法顺利的转换，或者转换的结果不好处理解析，因此我们需要选取一组”好“的坐标卡，来覆盖我们的空间  
### 图册  
*在流形$(M,\tau)$中，图册$\mathcal{A}$是一族坐标卡，记作$\mathcal{A}=\{(U_i,\varphi_i)\}_{i\in I}$，满足  
$\bigcup_{i\in I} U_i=M$*  
  
### 相容性  
*在流形$(M,\tau)$中，坐标卡$(U,\varphi),(V,\psi)$是$C^k$相容的,当且仅当$\psi \circ \varphi^{-1} \in C^k(\varphi(U\cap V),\mathbb{R}^n)$*  
  
*图册$\mathcal{A}$是$C^k$相容的,当且仅当$\forall (U,\varphi),(V,\psi)\in \mathcal{A},(U,\varphi)$和$(V,\psi)$是$C^k$相容的*  
  
我们固然希望一个完美的图册是$C^\infty$相容的，这样每一点的周围空间都能光滑的粘合起来，但是我们很容易“恶意“构造一个流形让这个图册不存在，或者不足以充分的我们的空间，所以我们不得不约束我们研究的范围  
### 光滑流形
*流形$(M,\tau)$是光滑流形，当且仅当其存在一个光滑图册*

这是一个非常完美的结构，我们可以在上面做任何微分操作。而且由于要求每个点周围都可以光滑的展开到欧几里得空间上，也可以的光滑的粘合起来，所以整个流形看起来也非常圆润。

由于光滑图册有可能有许多个，我们需要找到一个最大的，才易于我们研究

### 极大光滑图册
*在光滑流形$(M,\tau)$中，$\mathcal{A}$是其极大光滑图册，当且仅当$\mathcal{A}$是$C^\infty$相容，且 $\forall \text{坐标卡}(U,\varphi),(\mathcal{A}\cup \{(U,\varphi)\}$是$C^\infty$相容的 $)\Rightarrow ((U,\varphi)\in \mathcal{A})$*  



## 切空间  
  
求导高中数学就学过，并且很简单对吧？~~如果导数就觉得难，那不会有这份笔记了~~。那么为什么那种一维的曲线问题要求导呢？就是为了捕捉曲线上某点的局部性质。比如说我们可以用导数的正负性来捕捉函数的单调性。本质上来讲，我们能用导数找到某一点的切线，然后在切线上找到一个有方向（正负性）的量，能很好的描述曲线的变化趋势。到了流形空间中，我们陷入了“找不到北”的困境，怎么办呢？我们也需要找到流形中每一点上能描述大小方向的对象。但是描述什么大小方向呢？当然是空间中任意经过这一点曲线在这里的变化量，或者说速度向量咯。那么我们就用一个泛函来捕捉它
  
### 导子与切空间  
*在光滑流形$(M,\tau)$中，$p\in M$，线性算子$v:C^\infty(U,\mathbb{R})\to \mathbb{R}\; (U\in \mathcal{N}(p))$是$p$处的一个导子，当且仅当$\forall f,g \in C^\infty(U,\mathbb{R}^n),v(fg)=f(p) v(g)+g(p) v(f)$*  
  
*在光滑流形$(M,\tau)$中，$p\in M$, 点p的切空间$T_pM=\{v:C^\infty(U,\mathbb{R})\to \mathbb{R}\mid U\in \mathcal{N}(p),v$是$p$处的一个导子$\}$*  
  
导子就对微分算子的一个化归，但是确实管用，能捕捉我们想要的信息，具体怎么捕捉的，我们马上就能感受到。

### 切空间是线性空间吗？  
我们希望切空间能描述大小方向，那么我们就需要让它是线性空间。自然想到构造  
  
$(T_pM,\mathbb{R},+,\cdot)$其中  
  
1. $\forall v_1,v_2\in T_pM,(v_1+v_2)(f)=v_1(f)+v_2(f)$  
2. $\forall v\in T_pM,c\in \mathbb{R},(c\cdot v)(f)=c(v(f))$  
  
结合定义不难证明它满足线性空间的条件，所以切空间上存在着一个这样的线性空间

### 切空间的维度
在一条一维的曲线上，它的切线也是一维的，同理，这个线性空间的维度和流形一样。我们来证明一下

*$\operatorname{dim}\, M=\operatorname{dim}\, T_pM$*

**证明:**

*由线性空间维度的定义，我们需要构造切空间的一个基。我们化归的思考，如果在欧几里得空间上，我们点$p$的切空间是什么样的？实际上一个$p$处的一个向量就是把一个函数的这个速度向量表示了，如果我们要分到$n$个方向上，无非就是$\frac{\partial}{\partial x^i}\big |_{p}$这就是欧氏空间中切空间的基*

*现在，我们取一张包含$p$的坐标卡$(U,\varphi)$。由于$\varphi$同胚时,$\varphi'(x)=\varphi(x)-\vec{d},\vec{d}\in \mathbb{R}^n$也同胚，故可以令$\varphi(p)=0$。为了便于分解，我们设$\varphi=(x^1,x^2,\cdots,x^n)$*

*接下来我们能做的事情非常简单，我们直接把$f$复合一个$\varphi^{-1}$射进$\mathbb{R}^n$里，然后导一发再用$x$取$\varphi(p)$给它射回来 (~~Doge~~)。也就是$\frac{\partial}{\partial x^i}\big |_p\stackrel{\mathrm{def}}{=} \frac{\partial\; f\circ \varphi^{-1}}{\partial x^i}\big |_{\varphi(p)}$。于是我们可以得到一个基的集合$\{\frac{\partial}{\partial x^i}\big |_p\}_{i\in [1,n]\cap\mathbb{Z}}$*

*接下来我们确保这些基线性无关。不妨假设$c^1,c^2,\cdots,c^n\in \mathbb{R},s.t.\, \sum_{i\in [1,n]\cap\mathbb{Z}} c^i\frac{\partial}{\partial x^i}\big |_p=0$。即对于任意的$f$，都有$\sum_{i\in [1,n]\cap\mathbb{Z}} c^i\frac{\partial}{\partial x^i}\big |_p=0$*

*不难想到$\forall j\in [1,n]\cap\mathbb{Z}$,取$x^j$作用于每一个基，可以得到$\frac{\partial x^j}{\partial x^i}\big |_p=\begin{cases}1&(i=j)\\0&(i\ne j)\end{cases}$。假设此时$\sum_{i\in [1,n]\cap\mathbb{Z}} c^i\frac{\partial}{\partial x^i}\big |_p=0$，则$c^j=0$,即$\forall j\in [1,n]\cap\mathbb{Z},c^j=0$，得到这些基线性无关*

*接下来要证明这些基能张成整个空间。即$\forall D\in T_pM,\exists a^1,a^2,\cdots,a^n\in \mathbb{R},s.t.\, D=\sum_{i\in [1,n]\cap\mathbb{Z}} a^i\frac{\partial}{\partial x^i}\big |_p$*

*怎么办呢？我们不妨先任取一个函数$f\in C^\infty(U,\mathbb{R})$研究。即证$D(f)=\sum_{i\in [1,n]\cap\mathbb{Z}} a^i\frac{\partial}{\partial x^i}\big |_p f=\sum_{i\in [1,n]\cap\mathbb{Z}} a^i\frac{\partial\; f\circ \varphi^{-1}}{\partial x^i}\big |_{\varphi(p)}$*

*我们思考的关键是想把$D(f)$表示为等号右边的形式，那么我们需要拆掉$f$，然后应用莱布尼茨法则。$f$并不好拆，但是$\hat{f}\stackrel{\mathrm{def}}{=}f\circ \varphi^{-1}$作为$\mathbb{R}^n$上的函数就能用上我们最基础的工具们了。*

*我们还是化归到一维的情况下思考。设$h:\mathbb{R}\to \mathbb{R}$是光滑函数，那么由微积分的基本定理，可以得到$\forall r\in\mathbb{R},\int^1_0 \frac{d}{dx}h(rx) dx=h(r)-h(0)$即$f(r)=h(0)+\int_{[0,1]}\frac{d}{dx}h(rx) dx$。其中$\frac{d}{dx}h(rx)=\frac{dh(rx)}{drx}\frac{drx}{dx}=r\frac{dh}{dx}\big |_{rx}$于是得到$h(r)=h(0)+r\int^1_0 \frac{dh}{dx} dx$。如果记性好点，那么一定能想起我们在泰勒展开的积分余项中证过这个部分。*

*现在回归高维，我们定$r=(r^1,\cdots,r^n)$,光滑函数$h:\mathbb{R}^n\to \mathbb{R}$。现在我们取一个变量$s$，就令它在$[0,1]$中吧。像刚才那样，我们可以得到$h(r)=h(0)+\int_{[0,1]} r^i \sum_{i\in [1,n]\cap\mathbb{Z}} \frac{\partial h}{\partial r^i}\big |_{sr} ds=h(0)+\sum_{i\in [1,n]\cap\mathbb{Z}} r^i \int_{[0,1]} \frac{\partial h}{\partial r^i}\big |_{sr} ds$*

*这种拆分有点远了，但是终于，我们能绕回来了。$\hat{f}(x)=\hat{f}(0)+\sum_{i\in [1,n]\cap\mathbb{Z}} x^i \int^1_0 \frac{\partial \hat{f}}{\partial x^i}\big |_{sx} ds$，还原到流形上，令$\varphi(p)=0,\varphi(q)=x$，那么得到$f(q)=f(p)+\sum_{i\in [1,n]\cap\mathbb{Z}}x^i(q)g_i(q)$其中$g_i(p)=\int_{[0,1]} \frac{\partial \hat{f}}{\partial x^i}\big |_{0} ds=\frac{\partial \hat{f}}{\partial x^i}\big |_0=\frac{\partial}{\partial x^i}\big |_p f$。这已经非常漂亮了，我们直接把它放入D里，由线性性$D(f)=D(f(p))+\sum_{[1,n]\cap\mathbb{Z}}D(x^iG_i)$，再应用莱布尼茨法则$D(x^iG_i)=D(x^i)g_i(p)+x^i(p)D(g_i)=D(x^i)g_i(p)$。最后得到$D(f)=\sum_{i\in [1,n]\cap\mathbb{Z}} D(x^i)g_i(p)=\sum_{i\in [1,n]\cap\mathbb{Z}} D(x^i) \frac{\partial}{\partial x^i}\big |_p f$,即$a^i=D(x^i)\in \mathbb{R}$。终于，结束了*

*所以,$\{\frac{\partial}{\partial x^i}\big |_p\}_{i\in [1,n]\cap\mathbb{Z}}$是$T_pM$的基，$dim T_pM=n=\operatorname{dim}\, M$*
<p align="right">☐</p>

## 切丛
我们一定会想把所有的切空间并起来，但是怕有点什么冲突，那么就这么办吧
$TM=\{(p,v)|p\in M,v\in T_pM\}$

然后，自然而然得到一个投影映射$\pi:TM\to M$,其中$(p,v)\mapsto p$。并且我们也易于证明其原像$\pi^{-1}(p)$能组成$T_pM$，对于任意一点$p$，这个$\pi^{-1}(p)$被称为$p$处的纤维丛。你很快就能发现其微妙的作用。

### 切丛也是光滑流形
我们来关注一个更加有趣的性质吧。切丛竟然也是一个光滑流形！

往这个方向想想，我们需要构造一个拓扑结构。这很难思考，但我们可以一步一步的来。

我们需要先利用流形$M$的坐标卡。先取一个坐标卡$(U,\varphi)$,不妨设$\varphi=(x^1,\cdots,x^n)$

我们在刚才的证明中已经知道$T_pM$有基$\{\frac{\partial}{\partial x^i}\big |_p\}_{i\in [1,n]\cap\mathbb{Z}}$。即有任意$v\in T_pM$可表示为$v=\sum_{i\in [1,n]\cap\mathbb{Z}}v^i \frac{\partial}{\partial x^i}\big |_p \; (v^i\in \mathbb{R})$

现在，给你一个邻域上纤维丛中的元素$(p,v)$，你一定会想捕捉点$p$的坐标以及$v$对应的$v^i$。于是我们定义一个函数$\widetilde{\varphi}:\pi^{-1}(U)\to \mathbb{R}^n\times \mathbb{R}^n$。

我们知道$\mathbb{R}^n\times \mathbb{R}^n\cong \mathbb{R}^{2n}$,可以赋予一个标准拓扑$\tau_{\mathbb{R}^{2n}}$。我们就干脆把它射回去，即走$\widetilde{\varphi}^{-1}:\mathbb{R}^{2n}\to \pi^{-1}(U)$，不难证明存在拓扑使得其为同胚映射，那么我们就得到了一个新的拓扑，嗯好，接下来我们要用这个局部的子空间拓扑制造全局的$TM$的拓扑。

直接粘合起来显然是不行的，这时候一个猜想呼之欲出，那就是用相容性，实际上有这样一个定理

*命题: 在光滑流形$M$中，若$(U,\varphi)$和$(V,\psi)$是$C^\infty$兼容的且$U\cap V\ne \varnothing$，则$\widetilde{\psi} \circ \widetilde{\varphi}^{-1} \in C^\infty(\widetilde{\varphi}(\pi^{-1}(U)\cap \pi^{-1}(V)),\mathbb{R}^n)$*

**证明:**

*不妨直接计算一下，我们得到$\widetilde{\varphi}^{-1}:(r^1,\cdots,r^n,v^1,\cdots,v^n)\mapsto(\varphi^{-1}(r^1,\cdots,r^n),\sum_{i\in [1,n]\cap\mathbb{Z}} v^i \frac{\partial}{\partial x^i} \big |_{\varphi^{-1}(r^1,\cdots,r^n)})$*

*那么下一步复合无非是代入$\widetilde{\psi}$，得到$\widetilde{\psi} \circ \widetilde{\varphi}^{-1}:(r^1,\cdots,r^n,v^1,\cdots,v^n)\mapsto (\psi(\varphi^{-1}(r^1,\cdots,r^n)),X)$。$X\in \mathbb{R}^n$不太好处理，我们讨论一下。*

*$v=\sum_{i\in [1,n]\cap\mathbb{Z}}v^i \frac{\partial}{\partial x^i} \big |_{\varphi^{-1}(r^1,\cdots,r^n)}$这个东西，实际上应该写作$v(f)=\sum_{i\in [1,n]\cap\mathbb{Z}}v^i \frac{\partial f\circ \varphi^{-1}}{\partial x^i} \big |_{\varphi(\varphi^{-1}(r^1,\cdots,r^n))}=\sum_{i\in [1,n]\cap\mathbb{Z}}v^i \frac{\partial f\circ \varphi^{-1}}{\partial x^i} \big |_{(r^1,\cdots,r^n)}$吧。接着，我们只需要想办法把$\psi$换进去。由于$U\cap V$是公共邻域，对于任意一个$g:U\cap V \to \mathbb{R}$直接处理$v(g\circ \psi^{-1}\circ \varphi)=\sum_{i\in [1,n]\cap\mathbb{Z}}v^i \frac{\partial g\circ \psi^{-1}}{\partial x^i} \big |_{(r^1,\cdots,r^n)}$正包含我们的新基$\frac{\partial}{\partial x^i} \big |_{\psi(\varphi^{-1}(r^1,\cdots,r^n))}$。就这样我们得到了$v'(g)=v(g\circ \psi^{-1}\circ \varphi)$。由于两个坐标卡的兼容。这个构造能覆盖重叠邻域内所有光滑函数，故可以认为映射$(v^1,\cdots,v^n)\mapsto X$是光滑的。*

*由于前面这个$\psi(\varphi^{-1})$也明确定义为光滑的，所以映射$\widetilde{\psi} \circ \widetilde{\varphi}^{-1}$也是光滑的*
<p align="right">☐</p>

有了这个命题，我们不仅仅得到了光滑图册内的拓扑兼容性，还直接证明了$\widetilde{\varphi}$可以是$TM$的坐标卡！加上与$\mathbb{R}^n$的同胚关系，可以确认$TM$是一个流形！这个结论使得切空间拥有了非常优秀的拓扑性质。

## 余切空间
